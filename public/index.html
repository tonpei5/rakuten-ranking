<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>楽天アニメランキング</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
/* 共通 */
.item-image {
    width: 100%;
    height: 120px;
    object-fit: contain;
}

.item-name {
    font-size: 13px;
    line-height: 1.3;
    height: 2.6em;
    overflow: hidden;
}

.item-price {
    color: #dc3545;
    font-weight: bold;
}

/* スマホ用 */
@media (max-width: 576px) {
    .item-card {
        display: flex;
        flex-direction: row;
        align-items: center;
    }

    .item-image {
        width: 100px;
        height: 100px;
        flex-shrink: 0;
        margin: 8px;
    }

    .item-name {
        font-size: 14px;
        height: auto;
        margin-bottom: 4px;
    }

    .item-price {
        font-size: 15px;
    }
}
</style>

</head>
<body class="bg-light">

<div class="container py-4">
    <h1>楽天アニメ・フィギュアランキング</h1>

    <select id="genre" class="form-select mb-3">
        <option value="112203">フィギュア</option>
        <option value="201975">コミック</option>
        <option value="101164">キャラクターグッズ</option>
    </select>

    <div class="row" id="items"></div>
</div>

<script>
const API = "/api";

async function loadRanking() {
    const genre = document.getElementById("genre").value;
    const res = await fetch(`${API}?genre=${genre}`);
    const data = await res.json();

    const el = document.getElementById("items");
    el.innerHTML = "";

    data.items.forEach(item => {
        el.innerHTML += `
        <div class="col-12 col-sm-6 col-md-3 col-lg-2 mb-3">
            <a href="${item.url}" target="_blank" rel="noopener"
            class="text-decoration-none text-dark">
                <div class="card h-100 item-card">
                <img src="${item.image}" class="item-image">
                    <div class="card-body p-2">
                        <div class="item-name">${item.name}</div>
                        <div class="item-price">${item.price}円</div>
                    </div>
                </div>
            </a>
        </div>`;
    });
}

document.getElementById("genre").addEventListener("change", loadRanking);
loadRanking();
</script>


</body>
</html>
